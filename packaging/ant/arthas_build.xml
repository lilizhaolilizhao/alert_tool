<?xml version="1.0"?>
<project name="alert_tool" default="cp">
    <!--工程文件打包-->
    <target name="mvn" description="package">
        <exec executable="sh">
            <arg value="-c"/>
            <arg value="cd ${basedir}/../../;/Users/oneapm/software/apache-maven-3.5.4/bin/mvn -DskipTests package"/>
        </exec>
    </target>

    <!--不必询问,直接覆盖-->
    <target name="unzip" depends="mvn">
        <exec executable="sh">
            <arg value="-c"/>
            <arg value="cd ${basedir}/../../packaging/target;unzip -o ${basedir}/../../packaging/target/arthas-3.0.5-SNAPSHOT-bin.zip"/>
        </exec>
    </target>

    <!--拷贝到指定目录-->
    <target name="cp" depends="unzip">
        <exec executable="sh">
            <arg value="-c"/>
            <arg value="cd ${basedir}/../../packaging/target;cp -rf arthas-agent.jar arthas-client.jar
            arthas-core.jar arthas-spy.jar ${basedir}/../../core/target/"/>
        </exec>
    </target>
</project>